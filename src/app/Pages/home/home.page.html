<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles"
      refreshingText="{{ 'Refreshing' | translate }} ...">
    </ion-refresher-content>
  </ion-refresher>

  <div class="home-header">
    <div class="scan-container">
      <ion-icon name="zbc-scan" (click)="goToScan()"></ion-icon>
    </div>
    <ion-label class="account" *ngIf="account" color="medium" (click)="switchAccount($event)">
      <div class="account-name-container">
        <h1 class="account-name">{{ account.name }}</h1>
        <ion-icon name="zbc-chevron-down" color="secondary"></ion-icon>
      </div>
      <p>{{ account.address.value | shortAddress }}</p>
    </ion-label>

    <ion-label class="main-balance">
      <ion-text class="amount">
        <span class="sufix">ZBC</span>
        <span *ngIf="isLoading; else boxAccountBalance" class="skeleton-text" style="width: 80px"></span>
        <ng-template #boxAccountBalance>
          <span *ngIf="accountBalance">{{ accountBalance.balance/1e8 | number: '0.0-2' }}</span>
        </ng-template>
      </ion-text>
    </ion-label>

    <ion-label class="other-balance">
      <ion-text class="amount">
        <span>{{ "spendable" | translate }}</span>
        <span class="sufix">ZBC</span>
        <span *ngIf="isLoading; else boxSpendableBalance" class="skeleton-text" style="width: 80px"></span>
        <ng-template #boxSpendableBalance>
          <span *ngIf="accountBalance">{{ accountBalance.spendableBalance/1e8 | number: '0.0-2' }}</span>
        </ng-template>
      </ion-text>
    </ion-label>
  </div>

  <ion-card class="card-buttons">
    <ion-card-content>
      <div class="main-buttons">
        <ion-label (click)="goToSend()">
          <ion-icon name="zbc-arrow-up" color="secondary"></ion-icon>
          <ion-text>
            <h2>{{ "send" | translate }}</h2>
          </ion-text>
        </ion-label>
        <ion-label (click)="goToReceive()">
          <ion-icon name="zbc-arrow-down" color="secondary"></ion-icon>
          <ion-text>
            <h2>{{ "receive" | translate }}</h2>
          </ion-text>
        </ion-label>
      </div>

      <div class="other-buttons">
        <ion-label (click)="goToMultisig()">
          <ion-icon ios="ios-create" md="md-create"></ion-icon>
          <ion-text>
            <h4>{{ "multisignature" | translate }}</h4>
          </ion-text>
        </ion-label>
        <ion-label (click)="showBlockchainObjectOption($event)">
          <ion-icon name="zbc-boxes" color="secondary"></ion-icon>
          <ion-text>
            <h4>{{ "Blockchain Object" | translate }}</h4>
          </ion-text>
        </ion-label>
        <ion-label (click)="showAlert();">
          <ion-icon name="zbc-send" color="secondary"></ion-icon>
          <ion-text>
            <h4>{{ "Liquid Payment" | translate }}</h4>
          </ion-text>
        </ion-label>
      </div>

    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-content>
      <ion-list class="transaction-list">
        <ion-item>
          <div class="transaction-header">
            <div>
              <ion-icon name="zbc-clock" color="secondary"></ion-icon>
              <span>{{ "transactions" | translate }}</span>
            </div>
            <span *ngIf="recentTx && recentTx.length>=1" class="all" (click)="goToTransactions()">{{ "see all" |
              translate }}</span>
          </div>
        </ion-item>
        <ng-container *ngIf="isLoadingRecentTx; else transactionList">
          <ion-item *ngFor="let i of [0, 1, 2, 3, 4, 5]">
            <app-skeleton-transaction></app-skeleton-transaction>
          </ion-item>
        </ng-container>
        <ng-template #transactionList>

          <ion-item *ngFor="let pendingtrx of unconfirmTx; let i = index" button
            (click)="openDetailUnconfirm(pendingtrx)">
            <ion-label>
              <ion-row class="ion-justify-content-between">
                <ion-col size="7">
                  <div *ngIf="pendingtrx.recipient.value == account.address.value">
                    <ion-label class="title">
                      {{ pendingtrx.senderAlias }}
                    </ion-label>
                    <ion-label class="title">
                      {{ pendingtrx.sender.value | shortAddress }}
                    </ion-label>
                  </div>

                  <div *ngIf="pendingtrx.sender.value == account.address.value">
                    <ion-label class="title">
                      {{ pendingtrx.recipientAlias }}
                    </ion-label>
                    <ion-label class="title">
                      {{ pendingtrx.recipient.value | shortAddress }}
                    </ion-label>
                  </div>

                  <ion-label class="date" style="font-size: 0.7em">{{
                    pendingtrx.timestamp | date: "short"
                    }} <span style="color:orange">{{ "pending" | translate }}</span>
                    <!-- <ion-spinner name="lines-small" style="width: 15px !important; height: 15px !important;"></ion-spinner> -->
                  </ion-label>
                </ion-col>
                <ion-col size="5" class="ion-text-end">
                  <ion-label class="amount pending">
                    {{ pendingtrx.txBody.amount / 1e8 | number: '0.0-6' }} <span style="color:grey">ZBC</span>
                  </ion-label>
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>

          <ng-container *ngIf="recentTx && recentTx.length >= 1; else noTransaction">
            <ion-item *ngFor="let transaction of recentTx; let i = index"
              (click)="goToTransactionDetail(transaction.id)">
              <app-transaction-item [transaction]="transaction"></app-transaction-item>
            </ion-item>
          </ng-container>
        </ng-template>
        <ng-template #noTransaction>
          <ion-item>
            <ion-label>{{ "you don't have any transaction." | translate }}</ion-label>
          </ion-item>
        </ng-template>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card class="card-article">
    <ion-img src="assets/images/sampleblog1.jpg"></ion-img>
    <div class="cover"></div>
    <div class="title">What Is Lightning Network? And How Does It Work?</div>
  </ion-card>
</ion-content>