<ion-header no-border>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button>
      </ion-back-button>
    </ion-buttons>
    <ion-title>{{ "Send" | translate }}</ion-title>
    <ion-buttons color="primary" slot="end">
      <ion-button routerLink="/feedback">
        Feedback
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles"
      refreshingText="{{ 'Refreshing' | translate }} ...">
    </ion-refresher-content>
  </ion-refresher>

  <div *ngIf="isLoadingBalance || isLoadingTxFee">
    <ion-progress-bar type="indeterminate"></ion-progress-bar>
  </div>

  <ion-grid>
    <ion-row>
      <ion-col size="12">
        {{ "From Account" | translate }}
      </ion-col>
    </ion-row>
    <ion-row *ngIf="account" (click)="openListAccount('sender')" class="ion-row-cont">
      <ion-col size="12" style="padding:10px">

        <ion-label>
          <p>{{ account.accountName }} <span>
              <ion-icon name="arrow-dropdown"></ion-icon>
            </span> </p>
          <p class="address">{{ account.address }}</p>
          <p>Balance:<br />
            <span>{{ account.balance }} ZBC</span><br />
            <span>{{ account.balance * priceInUSD * currencyRate.value  | number: '0.0-4' }}
              {{ currencyRate.name }}</span>
          </p>
        </ion-label>

      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-label>
          {{ "Pay to" | translate }}
          <ion-text color="danger">*</ion-text>
        </ion-label>
      </ion-col>
    </ion-row>
    <ion-row class="ion-row-cont">
      <ion-col size="10" style="padding:0px">
        <ion-textarea rows="3" maxlength="60" placeholder="{{'Enter recipient address'|translate}}"
          (ionChange)="validateRecipient()" [(ngModel)]="recipient">
        </ion-textarea>
      </ion-col>
      <ion-col size="2" style="text-align: right;">
        <ion-icon name="arrow-dropdown" (click)="presentGetAddressOption();"></ion-icon>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="!isRecipientValid">
      <ion-col col-12>
        <ion-label color="danger">Recipient {{ "Address is not valid" | translate }}!</ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-label>
          {{ "Amount" | translate }}<ion-text color="danger">*</ion-text>
        </ion-label>
      </ion-col>
    </ion-row>
    <ion-row class="ion-row-cont">
      <ion-col size="8" style="padding-left:5px">

        <ion-input placeholder="{{'Enter amount'|translate}}" text-right style="border-bottom: 1px solid #dddddd;"
          (ionChange)="validateAmount()" maxlength="12" type="number" [(ngModel)]="amountTemp">
        </ion-input>
        <ion-input value="{{ amountSecond  | number: '0.0-2'}}" style="font-size:0.8em" text-right readonly type="text">
        </ion-input>
        <!-- <ion-label style="font-size: 0.8em;">{{ amountSecond  | number: '0.0-4'}} {{ secondaryCurr }}</ion-label> -->

      </ion-col>
      <ion-col size="2" style="font-size: 0.8em; padding-left: 8px;">
        <div style="margin-top:12px">{{primaryCurr}}</div>
        <div style="margin-top:24px; font-size: 0.8em;">{{secondaryCurr}}</div>
      </ion-col>
      <ion-col size="2" style="text-align:right; padding-right: 5px; padding-top: 30px;">
        <img src="../../../assets/images/switch-vertical-256.png" style="width:17px" (click)="switchCurrency()" />
      </ion-col>
    </ion-row>
    <!-- <ion-row>
      <ion-col size="9">
        <ion-label style="font-size: 0.8em;">{{ amountSecond  | number: '0.0-4'}} {{ secondaryCurr }}</ion-label>
      </ion-col>
      <ion-col size="3">

      </ion-col>
    </ion-row> -->
    <ion-row *ngIf="!isAmountValid">
      <ion-col>
        <ion-label color="danger" class="displayerror">{{ amountMsg }}!</ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-label>
          {{ "Transaction Fee" | translate }}
          <ion-text color="danger">*</ion-text>
        </ion-label>
      </ion-col>
    </ion-row>

    <ion-row class="ion-row-cont">
      <ion-col style="padding:0px;">

        <ion-select interface="popover" [(ngModel)]="trxFee" (ionChange)="changeFee($event)">
          <ion-select-option *ngFor="let sfee of allFees" value="{{sfee.fee}}">
            {{ sfee.name }} {{ sfee.fee | number: '0.0-4' }} ZBC
          </ion-select-option>
          <!-- <ion-select-option value="-1">
            Custom Fee
          </ion-select-option> -->
        </ion-select>

      </ion-col>
    </ion-row>

    <ion-row *ngIf="customeChecked">
      <ion-col>
        <ion-input placeholder="{{'Enter transaction fee'|translate}}" (ionChange)="validateCustomFee()" maxlength="12"
          type="number" [(ngModel)]="customfee"></ion-input>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="!isCustomFeeValid">
      <ion-col>
        <ion-label color="danger">{{ "Select one transaction fee" | translate }} or input custom fee!
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row (click)="showAdvance()">
      <ion-col>
        <ion-label *ngIf="!isAdvance">
          
            <span class="textcustom">Advanced (coming soon) </span>
            <ion-icon name="arrow-dropdown"></ion-icon>
          
        </ion-label>
        <ion-label *ngIf="isAdvance">
          
            <span class="textcustom">Hide Advance (coming soon) </span>
            <ion-icon name="arrow-dropup"></ion-icon>
          
        </ion-label>
      </ion-col>
    </ion-row>

    <div *ngIf="isAdvance">
      <ion-row>
        <ion-col>
          <ion-label>{{ "Approver Address" | translate }} </ion-label>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input class="ion-input-border" placeholder="Enter approver" name="approver" maxlength="12" type="text"></ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-label>{{ "Approver Commision" | translate }} </ion-label>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input  class="ion-input-border" placeholder="Enter commision" name="approverCommision" maxlength="12" type="number">
          </ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-label>{{ "Timeout" | translate }}</ion-label>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input  class="ion-input-border" placeholder="Enter timeout" name="timout" maxlength="12" type="number"></ion-input>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-button color="secondary" *ngIf="!isLoadingBalance && !isLoadingTxFee" (click)="showConfirmation()"
          expand="block">
          {{ "Next" | translate }}
        </ion-button>
        <ion-button disabled color="secondary" *ngIf="isLoadingBalance || isLoadingTxFee" (click)="showConfirmation()"
          expand="block">
          {{ "Next" | translate }}
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>