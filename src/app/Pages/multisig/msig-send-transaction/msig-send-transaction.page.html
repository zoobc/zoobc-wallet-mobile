<ion-header no-border>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button> </ion-back-button>
    </ion-buttons>
    <ion-title>{{ "Send" | translate }}</ion-title>
    <ion-buttons color="primary" slot="end">
      <ion-button routerLink="/feedback">
        Feedback
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <div *ngIf="isLoadingBalance || isLoadingTxFee">
    <ion-progress-bar type="indeterminate"></ion-progress-bar>
  </div>

  <ion-grid>
    <ion-row>
      <ion-col size="12">
        {{ "From Account" | translate }}
      </ion-col>
    </ion-row>
    <!-- <ion-row *ngIf="account" (click)="openListAccount('sender')"> -->
    <ion-row *ngIf="account" (click)="switchAccount()">
      <ion-col size="12">
        <ion-item color="primary">
          <ion-label>
            <h2>{{ account.name }}</h2>
            <p>
              {{ account.shortAddress }}&nbsp;&nbsp;
              <span>
                <ion-icon name="arrow-dropdown"></ion-icon>
              </span>
            </p>
            <p>&nbsp;</p>
            <p>Current Balance</p>
            <h1>{{ account.balance | number: '0.0-2' }} ZBC</h1>
            <p>
              {{ account.balance * priceInUSD * currencyRate.value | number:
              '0.0-2' }} {{ currencyRate.name }}
            </p>
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-label>
          {{ "Transaction Fee" | translate }}
          <ion-text color="danger">*</ion-text>
        </ion-label>
      </ion-col>
    </ion-row>

    <ion-row class="ion-row-cont">
      <ion-col style="padding:0px;">
        <ion-select interface="popover" [(ngModel)]="optionFee" (ionChange)="changeFee()">
          <ion-select-option *ngFor="let sfee of allFees" value="{{sfee.fee}}">
            {{ sfee.name }} {{ sfee.fee | number: '0.0-4' }} ZBC
          </ion-select-option>
          <ion-select-option value="-1">
            Custom Fee
          </ion-select-option>
        </ion-select>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="customeChecked" class="ion-row-cont" style="margin-bottom:10px">
      <ion-col size="8" style="padding-left:10px">
        <ion-input placeholder="{{'Enter fee'|translate}}" class="ion-text-right"
          style="border-bottom: 1px solid #dddddd;font-size:1.2em; color:#0B3D65" (ionChange)="validateCustomFee()"
          maxlength="12" type="number" [(ngModel)]="customfeeTemp">
        </ion-input>
        <ion-input value="{{ customfee2  | number: '0.0-6'}}" style="font-size:0.9em" class="ion-text-right" readonly
          type="text">
        </ion-input>
        <!-- <ion-label style="font-size: 0.8em;">{{ amountSecond  | number: '0.0-4'}} {{ secondaryCurr }}</ion-label> -->
      </ion-col>
      <ion-col size="2" style="font-size: 0.8em; padding-left: 8px;">
        <div style="margin-top:16px; color:#0B3D65">{{primaryCurr}}</div>
        <div style="margin-top:24px; font-size: 0.8em;">{{secondaryCurr}}</div>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="!isCustomFeeValid">
      <ion-col>
        <ion-label color="danger">Transaction fee is not valid! minimum fee is {{ minimumFee }}
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid style="margin-top:20px;">
    <ion-row>
      <ion-col>
        <ion-button color="tertiary" *ngIf="!isLoadingBalance && !isLoadingTxFee" (click)="sendTransaction()"
          expand="block">
          {{ "Send" | translate }}
        </ion-button>
        <ion-button disabled color="tertiary" *ngIf="isLoadingBalance || isLoadingTxFee" expand="block">
          {{ "Send" | translate }}
        </ion-button>
        <ion-button color="secondary" *ngIf="!isLoadingBalance && !isLoadingTxFee" (click)="saveDraft()"
        expand="block" fill="outline">
        {{ "Save Draft" | translate }}
      </ion-button>
      <ion-button disabled color="secondaryCurr" *ngIf="isLoadingBalance || isLoadingTxFee" expand="block" fill="outline">
        {{ "Save Draft" | translate }}
      </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>