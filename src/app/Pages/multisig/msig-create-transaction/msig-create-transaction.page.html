<ion-header no-border>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button> </ion-back-button>
    </ion-buttons>
    <ion-title>{{ 'multisignature' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles"
      refreshingText="{{ 'refreshing' | translate }} ...">
    </ion-refresher-content>
  </ion-refresher>

  <div *ngIf="isProcessing">
    <ion-progress-bar type="indeterminate"></ion-progress-bar>
  </div>

  <div class="stepper">
    <ng-container *ngIf="stepper.multisigInfo">
      <div class="step">
        <span class="step-circle">
          <ion-icon name="radio-button-on"></ion-icon>
        </span>
        <span class="step-label">{{ 'add multisig info' | translate }}</span>
      </div>
      <div class="stepper-line"></div>
    </ng-container>
    <div class="step active">
      <span class="step-circle">
        <ion-icon name="checkmark-circle"></ion-icon>
      </span>
      <span class="step-label">{{ 'create transaction' | translate }}</span>
    </div>
    <ng-container *ngIf="stepper.signatures">
      <div class="stepper-line"></div>
      <div class="step">
        <span class="step-circle">
          <ion-icon name="checkmark-circle"></ion-icon>
        </span>
        <span class="step-label">{{ 'add signatures' | translate }}</span>
      </div>
    </ng-container>
  </div>

  <form [formGroup]="createTransactionForm" (submit)="next()">

    <app-form-send-money [group]="createTransactionForm" [inputMap]="fieldList" [multisig]="true"
      *ngIf="multisig.txType == 1">
    </app-form-send-money>

    <app-form-setup-account-dataset [group]="createTransactionForm" [inputMap]="fieldList" [multisig]="true"
      *ngIf="multisig.txType == 3">
    </app-form-setup-account-dataset>

    <app-form-remove-account-dataset [group]="createTransactionForm" [inputMap]="fieldList" [multisig]="true"
      *ngIf="multisig.txType == 259"></app-form-remove-account-dataset>

    <app-form-escrow-approval [group]="createTransactionForm" [inputMap]="fieldList" [multisig]="true"
      *ngIf="multisig.txType == 4"></app-form-escrow-approval>

    <span class="form-advanced-option">{{ 'advanced option' | translate }}</span>
    <app-form-escrow [group]="createTransactionForm" [inputMap]="fieldList"></app-form-escrow>


    <ion-button expand="full" *ngIf="multisig.signaturesInfo !== undefined" color="primary"
      (click)="generateDownloadJsonUri()" [disabled]="createTransactionForm.invalid">
      {{ 'export draft multi signature' | translate }}
    </ion-button>

    <ion-button color="tertiary" expand="block" (click)="saveDraft()">
      {{ 'save' | translate }}
    </ion-button>
    <ion-button type="submit" color="tertiary" expand="block" [disabled]="createTransactionForm.invalid">
      {{ 'next' | translate }}
    </ion-button>

  </form>

</ion-content>