<ion-header no-border>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="openMenu()">
        <ion-icon slot="icon-only" name="menu"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>ZooBC</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-dashboard" color="content-default">
  <ion-refresher slot="fixed" #refresher (ionRefresh)="refreshData(refresher)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="balance-container bg-style-2 ion-padding">
    <div class="selected-account">
      <ion-item lines="none" button="true" (click)="openAccount()">
        <ion-label>
          <div class="account-name">
            <h2>
              {{ account.name }}
            </h2>
            <ion-icon name="ios-arrow-down"></ion-icon>
          </div>
          <span appAddressElipsis [address]="account.address"></span
        ></ion-label>
      </ion-item>
    </div>

    <ion-item class="ion-no-padding balance-item">
      <img class="logo" slot="start" src="assets/images/logo-white.png" />
      <ion-label>
        <ion-label class="balance-title">
          Balance
        </ion-label>
        <ion-label class="main-balance"
          >{{ balance / 1e8 | number: "0.0-4" }} ZBC</ion-label
        >
        <ion-label class="sub-balance"
          ><div appCurrencySelector>
            {{ balance / 1e8 | activeCurrencyRate$ | async }}
            <ion-icon name="arrow-dropdown"></ion-icon>
          </div>
        </ion-label>
      </ion-label>
    </ion-item>

    <ion-item lines="none" button="false" class="ion-no-padding balance-item">
      <img class="logo" src="assets/images/logo-white.png" />
      <ion-label>
        <ion-label class="balance-title">
          Spendable Balance
        </ion-label>
        <ion-label class="main-balance"
          >{{ spendablebalance / 1e8 | number: "0.0-4" }} ZBC</ion-label
        >
        <ion-label class="sub-balance">
          <div appCurrencySelector>
            {{ spendablebalance / 1e8 | activeCurrencyRate$ | async }}
            <ion-icon name="arrow-dropdown"></ion-icon>
          </div>
        </ion-label>
      </ion-label>
    </ion-item>
  </div>

  <ion-card no-padding class="trans-container" color="content-default">
    <ion-card-content>
      <p class="title-section ion-padding-horizontal">
        {{ "Pending Transaction" | translate }}
      </p>
      <ion-list class="ion-margin-top list-transaction">
        <ion-item
          lines="none"
          *ngIf="pendingTransactions.length <= 0; else pendingTransWithData"
        >
          <ion-label>You don't have any transactions</ion-label>
        </ion-item>
        <ng-template #pendingTransWithData>
          <ion-item
            #pendingTransWithData
            *ngFor="let transaction of pendingTransactions; let i = index"
            button
            (click)="openDetailTransction(i)"
          >
            <ion-label>
              <ion-row class="ion-justify-content-between">
                <ion-col size="7">
                  <ion-label class="title">
                    {{ transaction.address }}
                  </ion-label>
                  <ion-label class="date">{{
                    transaction.date | calendarDate
                  }}</ion-label>
                </ion-col>
                <ion-col size="5" class="ion-text-end">
                  <ion-label class="amount {{ transaction.type }}">
                    <span
                      class="prefix"
                      *ngIf="transaction.type == 'plus'; else minus"
                      >+</span
                    >
                    <ng-template #minus>
                      -
                    </ng-template>
                    {{ transaction.amount / 1e8 | number: "0.0-4" }} ZBC
                  </ion-label>
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
        </ng-template>
      </ion-list>

      <p class="title-section ion-padding-horizontal">
        {{ "Recent Transaction" | translate }}
      </p>
      <ion-list class="ion-margin-top list-transaction">
        <ion-item
          lines="none"
          *ngIf="transactions.length <= 0; else transWithData"
        >
          <ion-label>You don't have any transactions</ion-label>
        </ion-item>
        <ng-template #transWithData>
          <ion-item
            #transWithData
            *ngFor="let transaction of transactions; let i = index"
            button
            (click)="openDetailTransction(i)"
          >
            <ion-label>
              <ion-row class="ion-justify-content-between">
                <ion-col size="7">
                  <ion-label class="title">
                    {{ transaction.address }}
                  </ion-label>
                  <ion-label class="date">{{
                    transaction.date | calendarDate
                  }}</ion-label>
                </ion-col>
                <ion-col size="5" class="ion-text-end">
                  <ion-label class="amount {{ transaction.type }}">
                    <span
                      class="prefix"
                      *ngIf="transaction.type == 'plus'; else minus"
                      >+</span
                    >
                    <ng-template #minus>
                      -
                    </ng-template>
                    {{ transaction.amount / 1e8 | number: "0.0-4" }} ZBC
                  </ion-label>
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
          <ion-item detail="true" button="true" (click)="goToTransaction()"
            >View More
          </ion-item>
        </ng-template>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>
